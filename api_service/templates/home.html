{% extends 'base.html' %}
{% block title %}Welcome to MedQT{% endblock %}

{% block content %}

{% if not user_role %}
<!-- ============================
     NOT LOGGED IN VIEW
================================= -->
<div class="hero">
    <h1>
        Welcome to <span class="highlight">MedQT</span>
        <br>
        <span id="typing" class="typing-text"></span>
    </h1>

    <p class="subtitle">
        MedQT helps deliver fast, fair, and prioritized patient care.
        Powered by intelligent symptom-based queueing.
    </p>
</div>

<div class="card option-card">
    <h2>Get Started</h2>
    <p>Choose your role to begin.</p>

    <div class="button-grid">
        <a class="btn role-btn" href="/register/patient">I'm a Patient</a>
        <a class="btn role-btn" href="/register/doctor">I'm a Doctor</a>
    </div>

    <p class="login-note">
        Already using MedQT?
        <a href="/login">Log in here</a>.
    </p>
</div>

{% else %}
<!-- ============================
     LOGGED IN VIEW
================================= -->
<div class="card option-card">
    <h2>Welcome back to MedQT!</h2>
    <p>
        You're logged in as:
        <strong>{{ user_role|capitalize }}</strong>
    </p>

    <div class="button-grid">
        {% if user_role == 'patient' %}
        <a class="btn role-btn" href="/patient/dashboard">Go to Dashboard</a>
        {% elif user_role == 'doctor' %}
        <a class="btn role-btn" href="/doctor/dashboard">Go to Dashboard</a>
        {% endif %}

        <!-- Logout simply deletes cookies (your backend already implements /logout) -->
        <a class="btn role-btn danger" href="/logout">Logout</a>
    </div>
</div>
{% endif %}


<!-- Keep typing animation only for NOT-LOGGED-IN users -->
{% if not user_role %}
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
<script>
var typed = new Typed('#typing', {
  strings: [
    "Smarter queues.",
    "Faster care.",
    "Better patient outcomes.",
    "Welcome to MedQT."
  ],
  typeSpeed: 55,
  backSpeed: 35,
  loop: true,
  showCursor: false
});
</script>
{% endif %}

{% endblock %}
